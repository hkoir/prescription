
<!DOCTYPE html>
<html lang="en">
<head>

{% load static %}
{% load i18n %}
{% load custom_filters %}

<meta charset="UTF-8" name="color-scheme" content="light only">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pnova</title>


<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap CSS (Bootstrap 5.3) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap JS (Bootstrap 5.3) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Datepicker -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Font Awesome CSS for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Font Awesome CDN -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"> -->

<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<!-- Add CSS for Select2 -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<!-- Add JS for Select2 -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>



<link rel="stylesheet" href="{% static 'css/core.css' %}">

<script src="{% static 'js/common.js' %}"></script>


<script src="https://unpkg.com/htmx.org@1.9.2"></script>



<style>
    
html, body {
    background-color: white;
    color: #333333;
    padding-top: 125px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }



#mainNav, #socialNav{
    transition: transform 0.3s ease, top 0.3s ease;
}

    
/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&family=Roboto:wght@300;400;500&display=swap');

/* Apply font to entire navbar, including dropdowns */


#form-spinner {
  width: 1rem;
  height: 1rem;
  vertical-align: middle;
}




.navbar, 
.navbar .nav-item, 
.navbar .nav-link, 
.navbar .dropdown-menu, 
.navbar .dropdown-item, 
.navbar .dropdown-submenu .dropdown-menu {
    font-family: 'Poppins', 'Roboto', sans-serif !important;
}

.navbar .dropdown-menu .dropdown-item {
    font-family: "Arial", sans-serif !important; /* Set your desired font */
}

.navbar .dropdown-menu .dropdown-item i {
    font-family: inherit !important; /* Make icons follow the text font */
}

/* Apply font-family to dropdown items */
.navbar .dropdown-menu .dropdown-item {
    font-family: "Arial", sans-serif !important; /* Set your desired font */
}

/* Ensure icons use FontAwesome's font */
.navbar .dropdown-menu .dropdown-item i {
    font-family: "Font Awesome 5 Free", "Font Awesome 5 Pro" !important;
    font-weight: 900; /* Ensures solid icons show correctly */
}

.dropdown_caret_color{
    color:white
}

.nav-bar i{
    color:#0dcaf0
}
.navbar li, .navbar a, .navbar ul{
    color:white;
    
}

ul .dropdown-item > i{
    color:cyan
}

li a {
    line-height: 1.3rem;
    margin: 0 !important;
    padding: 4px 15px !important; /* Adjust as needed */
}

.menu-color{
     color:white;
    
 }

    



/* Style for the main dropdown */
.navbar .dropdown-menu {
    background-color: #2c3e50; 
    border: none;
    border-radius: 8px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
}

/* Style for dropdown items */
.navbar .dropdown-menu .dropdown-item {
    color: white !important; 
    padding: 10px 20px;
    font-size: 15px;
    font-weight: 500;
    text-decoration: none;
    font-family: 'Poppins', 'Roboto', sans-serif !important; /* Ensure font applies */
}

/* Hover effect for dropdown items */
.navbar .dropdown-menu .dropdown-item:hover {
    background-color: #34495e; 
    color: #f1c40f !important; 
}


/* Ensure links stay visible */
.navbar .dropdown-menu a {
    color: white !important;
    font-family: 'Poppins', 'Roboto', sans-serif !important; /* Force font for links */
}



/* Dropdown submenu wrapper */
.dropdown-submenu {
    position: relative;
}

/* Dropdown menu with scroll effect */
.dropdown-submenu > .dropdown-menu {
    position: absolute;
    top: 0;
    left: 100%;
    margin-top: -1px;
    display: none;
    max-height: 300px; /* Adjust height as needed */
    overflow-y: auto;
    background-color: #2c3e50;
    border-radius: 8px;
    z-index: 10001;
}

/* Ensure submenu opens only when hovering on the parent */
.dropdown-submenu:hover > .dropdown-menu {
    display: block;
}

/* Prevent flickering */
.dropdown-submenu:hover {
    position: relative;
}

/* Custom scrollbar styling */
.dropdown-submenu > .dropdown-menu::-webkit-scrollbar {
    width: 6px;
}

.dropdown-submenu > .dropdown-menu::-webkit-scrollbar-track {
    background: #1c2833; 
}

.dropdown-submenu > .dropdown-menu::-webkit-scrollbar-thumb {
    background: #f1c40f; /* Change scrollbar color */
    border-radius: 5px;
}

/* Hover effect */
.dropdown-submenu .dropdown-menu .dropdown-item:hover {
    background-color: #3a4b5c;
    color: #ffcc00 !important;
    z-index: 10001;
}


.nav-item {
    margin-right: 0px; /* Reduce space between menu items */
}


.sidebar {
    min-height: 100vh;
    background-color: #f8f9fa;
    padding-top: 60px; /* to push below navbar */
}



.custom-sidebar {
    width: 280px;         /* Default for desktop */
    max-width: 80vw;      /* Limit width on small screens */
    min-width: 220px;     /* Don't shrink too small */
}

@media (max-width: 576px) {
    .custom-sidebar {
        width: 50vw;      /* Responsive width on mobile */
    }
}

.custom-sidebar .dropdown-menu {
    min-width: 250px !important;
    width: auto !important;
    white-space: normal;

    background-color: #2c3e50;
    border: none;
    border-radius: 8px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    color: white; /* This sets text color for the dropdown container */
}

/* Specifically target the links inside the submenu */
.custom-sidebar .dropdown-menu .dropdown-item {
    color: white;           /* White text */
}

.custom-sidebar .dropdown-menu .dropdown-item:hover,
.custom-sidebar .dropdown-menu .dropdown-item:focus {
    background-color: #34495e;  /* Slightly lighter background on hover/focus */
    color: white;
}


.cs-logo {
  display: block;       /* Removes inline text baseline space */
  margin: 0 auto;       /* Centers the SVG */
}




.navbar-brand svg {
    width: 280px;    /* A fixed width for large screens */
    max-width: 100%; /* Will not exceed container width */
    height: auto;
}

/* Medium screens */
@media (max-width: 992px) {
    .navbar-brand svg {
        width: 250px; /* Slightly smaller */
    }
}

/* Small screens */
@media (max-width: 576px) {
    .navbar-brand svg {
        width: 200px;
    }
    .navbar-brand svg .cs-bn-text {
        fill: #fff !important;
        font-size: 36px;
    }
}



@media (max-width: 768px) {
    .navbar-brand svg {
        max-width: 250px;
    }
}


.navbar-brand {
    flex: 1 0 auto;
    overflow: hidden;
}
.navbar-brand {
    padding-right: 0.5rem;
    padding-left: 0.5rem;
}



.navbar-brand svg .cs-bn-text { 
    fill: #fff !important;
}


</style>




</head>


<body>
<nav class="navbar navbar-dark social-nav" id="socialNav">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <!-- Left Section -->
        <div class="d-flex align-items-center d-none d-md-block">
            <span class="navbar-text ">
                Social Links | Contact Us | Follow Us
            </span>
        </div>

        <!-- Middle Section (Search Form) -->
        <div class="flex-grow-1 d-none d-md-flex justify-content-center">
            <form class="d-flex" method="GET" action="{% url 'accounts:search_all' %}">
                <select id="id_search" class="form-control select2 me-2" name="q">
                    <option value="">Search...</option>
                </select>
                <button class="btn btn-info" type="submit">Search</button>
            </form>
        </div>

        <!-- Right Section (Language + Icons) -->
        <div class="d-flex align-items-center">
             <form action="{% url 'set_language' %}" method="post" id="language-form" class="d-flex align-items-center gap-2">
            {% csrf_token %}
            <label for="language-select" class="fw-bold ms-3">üåê&nbsp;{% trans "Language" %}</label>
            <select name="language" class="form-control" style="max-width:150px;" id="language-select">
                {% get_current_language as LANGUAGE_CODE %}
                {% get_available_languages as LANGUAGES %}
                {% for lang in LANGUAGES %}
                <option value="{{ lang.0 }}"{% if lang.0 == LANGUAGE_CODE %} selected{% endif %}>
                    {{ lang.1 }}
                </option>
                {% endfor %}
            </select>
        </form>

            <div class="social-icons d-flex ms-3">
                <a href="https://www.facebook.com" target="_blank" class="text-light me-2">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.twitter.com" target="_blank" class="text-light me-2">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.linkedin.com" target="_blank" class="text-light me-2">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="mailto:contact@yourcompany.com" class="text-light">
                    <i class="fas fa-envelope"></i> 
                </a>
            </div>
        </div>
    </div>
</nav>


<!-- Main Navbar -->
<nav class="navbar navbar-expand-lg main-nav" id="mainNav">
    <div class="container-fluid">

	 <!-- Custom Hamburger Button for side bar -->
        <button class="btn float-end border border-primary text-primary rounded m-2"
                style="background-color: white;"
                data-bs-toggle="offcanvas"
                data-bs-target="#offcanvas"
                role="button"
                aria-label="Toggle Sidebar">
            &#9776; <!-- Unicode hamburger icon -->
        </button>

       <a class="navbar-brand d-flex align-items-center" href="{% url 'prescription:home' %}">
        {% include "partials/caresetu-logo.svg" %}
    </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <!-- notification menue -->               
                        
        {% if request.user.is_authenticated %}

        <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="position-relative d-inline-block">
            <i class="fas fa-bell {% if unread_notifications|length > 0 %}new-notification{% endif %}"></i>
            {% if unread_notifications|length > 0 %}
                <span class="badge bg-danger notification-badge">{{ unread_notifications|length }}</span>
            {% endif %}
            </span>
        </a>

        <ul class="dropdown-menu notification-dropdown" aria-labelledby="navbarDropdown">
            <div class="notification-scroll">
            {% for notification in unread_notifications %}
                <li class="notification {% if not notification.is_read %}unread{% endif %}">
                <a href="#" class="dropdown-item mark-as-read" data-id="{{ notification.id }}">
                    <p>{{ notification.get_notification_type_display }}: {{ notification.message }}</p>
                </a>
                </li>
            {% empty %}
                <li><a class="dropdown-item" href="#">No new notifications</a></li>
            {% endfor %}
            </div>
        </ul>
        </li>
                                                
        {% else %}
        <li class="nav-item">
            <a class="nav-link" href="{% url 'accounts:login' %}">Log in</a>
        </li>
        {% endif %}
        
                            
                            
        
        <!-- notification end -->

        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle menu-color" style="color: white;" href="#" id="navbarDropdownNotices" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-bullhorn" aria-hidden="true"></i> Notices
            </a>

            <ul class="dropdown-menu" aria-labelledby="navbarDropdownNotices" style="max-height: 400px; overflow-y: auto;">
                
                <li><a class="dropdown-item" href="" style="color:red"><i class="fas fa-eye"></i>&nbsp;View Notices</a></li>
                <li><a class="dropdown-item" href="" style="color:blue"><i class="fas fa-plus-square"></i>&nbsp;Add notices</a></li>
                <li><a class="dropdown-item" href="" style="color:blue"><i class="fas fa-folder-open"></i>&nbsp;Archive old notifications</a></li>
            </ul>
        </li>
            
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle dropdown_caret_color"href="" id="navbarDropdownZymptom" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class=" fas fa-users text-info"></i><span style="color:gray">Zymptom</span>   
                        </a>       
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownZymptom" style="max-height: 400px; overflow-y: auto;">
                    <li><a class="dropdown-item" href="{% url 'symptom_checker:my_symptom_checks' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;My Symptom</a></li>          
                    <li><a class="dropdown-item" href="{% url 'symptom_checker:start_symptom_check' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Check my Symptom </a></li>
                    <li><a class="dropdown-item" href="{% url 'prescription:create_ai_prescription' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Create Ai Prescription</a></li>          
                    
                    <li><hr class="dropdown-divider"style="background-color:gray;"></li>                       
                    
                </ul>                                       
                                                
            </li> 

               
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle dropdown_caret_color"href="#" id="navbarDropdownServices" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class=" fas fa-users text-info"></i><span style="color:gray">Services</span>            
                                 
                    </a>                                       
                      
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownServices" style="max-height: 400px; overflow-y: auto;">
                        <li><a class="dropdown-item" href="{% url 'prescription:available_doctors' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Available doctors</a></li>          
                        <li><a class="dropdown-item" href="{% url 'prescription:ai_prescription_list' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Ai Prescription List </a></li>
                        <li><a class="dropdown-item" href="{% url 'prescription:doctor_bookings_list' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Doctor booking List </a></li>
                         <li><a class="dropdown-item" href="{% url 'prescription:doctor_prescription_list' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Doctor Prescription List </a></li>
                         {% if not request.user.role == 'patient' %}
                        <li><a class="dropdown-item" href="{% url 'finance:doctor_payment_list' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Doctor Payment list</a></li>
                        {% endif %}
                        <li><hr class="dropdown-divider"style="background-color:gray;"></li>                       
                       
                    </ul>                 
                </li> 


                 <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle dropdown_caret_color"href="#" id="navbarDropdownDashboard" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class=" fas fa-users text-info"></i><span style="color:gray">Dashboard</span>            
                                 
                    </a>                                       
                      
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownDashboard" style="max-height: 400px; overflow-y: auto;">
                         {% if request.user.role == 'doctor' %}                     
                          <li><a class="dropdown-item" href="{% url 'finance:doctor_dashboard' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Doctor Dashboard</a></li>                                 
                         {% elif request.user.is_staff %}
                          <li><a class="dropdown-item" href="{% url 'finance:create_doctor_profile' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Create Doctor Profile</a></li>
                          <li><a class="dropdown-item" href="{% url 'finance:enroll_doctor' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Enroll Doctor</a></li>   
                           <li><a class="dropdown-item" href="{% url 'finance:doctor_dashboard' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Doctor Dashboard</a></li>   
                           <li><a class="dropdown-item" href="{% url 'finance:patient_dashboard' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Patient Dashboard </a></li>                                
                          {% elif request.user.role == 'patient' %}
                          <li><a class="dropdown-item" href="{% url 'finance:patient_dashboard' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Patient Dashboard </a></li>  
                         
                           {% endif %}                         
                        <li><hr class="dropdown-divider"style="background-color:gray;"></li>                       
                       
                    </ul>                 
                </li> 


               
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle dropdown_caret_color"href="#" id="navbarDropdownUser" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class=" fas fa-user-cog text-info"></i>  &nbsp;<span style="color:gray">User Account</span>            
                                  
                    </a>   
                                    
                      
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownUser" style="max-height: 400px; overflow-y: auto;">
                        {% if user.is_authenticated %}                        
                        <li>
                            <form action="{% url 'accounts:logout' %}" method="post" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="dropdown-item" style="text-decoration: none;"><i class="fas fa-sign-out-alt"></i>&nbsp;Logout</button>
                            </form>
                        </li>    
                         {% if user.is_superuser or user.role == 'doctor' or user.role == 'consultant' %}
                            <li><a class="dropdown-item" href="{% url 'accounts:register' %}" style="text-decoration: none;">
                                <i class="fas fa-sign-in-alt"></i> &nbsp;Register Doctor
                            </a></li>
                        {% endif %}                                    
                        <li><a class="dropdown-item" href="{% url 'accounts:password_change' %}" style="text-decoration: none;"><i class="fas fa-key"></i>&nbsp;Change Password </a></li>
                        
                       {% else %}
                        <li><a class="dropdown-item" href="{% url 'accounts:login' %}" style="text-decoration: none;"><i class="fas fa-sign-in-alt"></i> &nbsp;Login</a></li>
                        <li><a class="dropdown-item" href="{% url 'accounts:register_patient' %}" style="text-decoration: none;"><i class="fas fa-sign-in-alt"></i> &nbsp;Register</a></li>                                 
                        <li><a class="dropdown-item" href="{% url 'accounts:pwdreset' %}" style="text-decoration: none;"><i class="fas fa-lock"></i>&nbsp;Forgot Password </a></li>
                        {% endif %}
                    </ul>                 
                </li> 

                  
           <div>
                {% if user.is_authenticated %}
                {% if user.photo_id %}
                    <img src="{{ user.photo_id.url }}" alt="Profile" class="rounded-circle" width="30" height="30">
                    {% endif %}
                    <span style="color:gray">Welcome&nbsp;{{ user.username }}</span>
                {% else %}
                <i class="fas fa-user-cog text-info"><span style="color:gray">Guest</span></i> &nbsp;
                 
                {% endif %}
                </div>
                               

            </ul>  <!-- this master Ul end  -->                  
                                
                                
        </div>
    </div>  

</nav>


<!-- Side bar menu -->
<div class="offcanvas offcanvas-start custom-sidebar" id="offcanvas" tabindex="-1" data-bs-keyboard="true" data-bs-backdrop="true">
 
    <div class="text-center mb-3" style="margin-top:20px">
    {% include "partials/caresetu-logo.svg" %}
    </div>
        <div class="offcanvas-header">
            <h6 class="offcanvas-title d-none d-sm-block" id="offcanvas">Menu</h6>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div class="offcanvas-body px-0">
         <form action="{% url 'set_language' %}" method="post" id="language-form" class="d-flex align-items-center gap-2">
            {% csrf_token %}
            <label for="language-select" class="fw-bold ms-3">üåê&nbsp;{% trans "Language" %}</label>
            <select name="language" class="form-control" style="max-width:150px;" id="language-select">
                {% get_current_language as LANGUAGE_CODE %}
                {% get_available_languages as LANGUAGES %}
                {% for lang in LANGUAGES %}
                <option value="{{ lang.0 }}"{% if lang.0 == LANGUAGE_CODE %} selected{% endif %}>
                    {{ lang.1 }}
                </option>
                {% endfor %}
            </select>
        </form>

            <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-start" id="menu">
                <li class="nav-item"><a href="{% url 'prescription:home' %}" class="nav-link text-truncate">
                    <i class="fs-5 bi-house"></i><span class="ms-1 text-dark">Home</span></a></li>
  


                <li><a href="#submenu1" data-bs-toggle="collapse" class="nav-link text-truncate">
		           <i class="fs-5 bi-speedometer2"></i><span class="ms-1 text-dark">Dashboard</span> </a></li>
                
		      <li class="dropdown"><a href="#" class="nav-link dropdown-toggle  text-truncate" id="dropdown" data-bs-toggle="dropdown" aria-expanded="false"> 
                    <i class="fas fa-pills text-success"></i><i class="fas fa-vial text-danger"></i><span 
			     class="ms-1 text-success">Medicine & Lab test</span> </a>
                    <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdown">
                          {% if request.user.is_staff %}
                         <li><a class="dropdown-item" href="{% url 'prescription:create_medicine' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Add Medicine</a></li>  
                          <li><a class="dropdown-item" href="{% url 'prescription:create_lab_test' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Add Labtest</a></li>  
                          {% endif %}       
                    </ul>
                </li>              
                
		       <li class="dropdown"><a href="#" class="nav-link dropdown-toggle  text-truncate" id="dropdown" data-bs-toggle="dropdown" aria-expanded="false"> 
                    <i class="fas fa-users text-success"></i><span class="ms-1 text-success">Appointments</span> </a>
                    <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdown">
                          {% if request.user.is_staff %}
                         <li><a class="dropdown-item" href="{% url 'appointments:create_doctor_timeslots' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Create time slots</a></li>  
                          <li><a class="dropdown-item" href="{% url 'appointments:general_appointment' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Manual Appointment</a></li>  
                         {% endif %} 
                          <li><a class="dropdown-item" href="{% url 'appointments:available_doctors' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Available Doctors</a></li>  
                          <li><a class="dropdown-item" href="{% url 'appointments:appointment_list' %}" style="text-decoration: none;"><i class="fas fa-plus-square"></i>&nbsp;Appointment List</a></li>       
                    </ul>
                </li>
                
                <li><a href="#" class="nav-link text-truncate"> <i class="fs-5 bi-grid"></i><span class="ms-1 text-success">Docctors</span></a> </li>
                <li><a href="#" class="nav-link text-truncate"><i class="fs-5 bi-people"></i><span class="ms-1 text-primary">Patients</span> </a></li>
            </ul>
     </div>
 </div>




    <div class="container-fluid">          
        {% block content %}
        {% endblock %}
    </div>
    
    {% include 'footer.html' %}




<!-- Bootstrap Modal -->
<div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="messageModalLabel">Messages</h5>
                <!-- Close Button -->
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="messagesContainer">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<script>
  document.getElementById('language-select').addEventListener('change', function() {
    document.getElementById('language-form').submit();
  });
</script>


<script>
document.addEventListener('DOMContentLoaded', function () {
    const dropdowns = document.querySelectorAll('.nav-item.dropdown');

    dropdowns.forEach(function (dropdown) {
        const toggle = dropdown.querySelector('.nav-link.dropdown-toggle');

        toggle.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();

            const isOpen = dropdown.classList.contains('show');

            // Close all dropdowns first
            dropdowns.forEach(d => {
                d.classList.remove('show');
                const menu = d.querySelector('.dropdown-menu');
                if (menu) menu.classList.remove('show');
            });

            // If it wasn't already open, open this one
            if (!isOpen) {
                dropdown.classList.add('show');
                const menu = dropdown.querySelector('.dropdown-menu');
                if (menu) menu.classList.add('show');
            }
        });
    });

    // ‚úÖ Close dropdowns when clicking anywhere else
    document.addEventListener('click', function () {
        dropdowns.forEach(d => {
            d.classList.remove('show');
            const menu = d.querySelector('.dropdown-menu');
            if (menu) menu.classList.remove('show');
        });
    });
});
</script>





  <script>
    const socialNav = document.getElementById('socialNav');
    const mainNav = document.getElementById('mainNav');
    const socialNavHeight = socialNav.offsetHeight;

    window.addEventListener('scroll', function () {
        if (window.scrollY > socialNavHeight) {
            socialNav.style.top = `-${socialNavHeight}px`;
            mainNav.classList.add('fixed-top');
        } else {
            socialNav.style.top = '0';
            mainNav.classList.remove('fixed-top');
        }
    });
</script>

  <script>
  $('#id_search').select2({
    width: '100%', 
    placeholder: 'Search...',
    allowClear: true,
    ajax: {
        url: "{% url 'accounts:search_all' %}",
        dataType: 'json',
        delay: 250,
        data: function(params) {
            return { q: params.term };
        },
        processResults: function(data) {
            return {
                results: $.map(data.results, function(item) {
                    return { id: item.id, text: item.text };
                })
            };
        },
        cache: true
    },
    minimumInputLength: 1
});

    </script>
<script>
    document.addEventListener("DOMContentLoaded", function () {   
        const messageModal = document.getElementById('messageModal');
        const messagesContainer = document.getElementById('messagesContainer');   
        if (messageModal && messagesContainer && messagesContainer.children.length > 0) { 
            const modalInstance = new bootstrap.Modal(messageModal);
            modalInstance.show();
   
            setTimeout(() => {
                modalInstance.hide();
            }, 5000);
        }
    });
</script>



<script>
$(document).ready(function () {
    // Function to mark a notification as read
    $(".mark-as-read").click(function (e) {
        e.preventDefault();  // Prevent default link behavior
        var notificationId = $(this).data("id");  // Get notification ID

        $.ajax({
            url: "/messaging/notifications/mark-as-read/" + notificationId + "/",
            type: "POST",
            headers: {
                "X-CSRFToken": "{{ csrf_token }}"  // Pass CSRF token
            },
            success: function (response) {
                if (response.success) {
                    // Hide the clicked notification or change its style
                    $("a[data-id='" + notificationId + "']").closest(".notification").fadeOut();

                    // Update the notification count badge
                    var count = parseInt($(".badge.bg-danger").text()) || 0;
                    if (count > 1) {
                        $(".badge.bg-danger").text(count - 1);
                    } else {
                        $(".badge.bg-danger").remove();  // Remove badge if no more unread notifications
                    }
                }
            },
            error: function () {
                alert("Error marking notification as read.");
            }
        });
    });
});
</script>







</body>
</html>

